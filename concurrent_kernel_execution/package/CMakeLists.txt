# Generated by Vitis, modify at only sections marked as USER SETTINGS
set(_CONTAINER_NAMES
matrix_ops
)


####    START OF THE USER SETTINGS    ####
# Below settings can be customized
# Adding any other command line options to be passed to v++ --package
set(USER_PACKAGE_OPTIONS
""
)
####    END OF USER SETTINGS SECTION    ####
####    CAUTION in updating below section    ####


# These setting are required to build the application as per the project
# template used. Update below only to modify the default settings.
# Below linker options are derived from the application template used to create
# this project. Update them to suite your requirement. They will not be modified
# further by the tool. If package options are needed, they can be added to
# USER_PACKAGE_OPTIONS listed above.
set(_PACKAGE_OPTIONS
""
)

# AIE libadf.a library will be added to V++ Packager if project has AIE
# component.
set(_AIE_LIB_ADF
""
)


# Below variables will be auto-updated based on the binary container.
set(_PACKAGE_XCLBIN_PATHS
hw_link/matrix_ops.xclbin
)
set(_PACKAGE_CFG_CFG
package/package.cfg
)
set(_PACKAGE_PROJ
package
)
##  End of variables auto-updated by the tool ##

foreach(CONTAINER ${_CONTAINER_NAMES})

	list(TRANSFORM _PACKAGE_XCLBIN_PATHS PREPEND "${CMAKE_BINARY_DIR}/")

	set(_XCLBIN  ${CONTAINER}.xclbin)

	set(_LINK_TARGETS VppLink_${CONTAINER})

	list(TRANSFORM _PACKAGE_CFG PREPEND "${CMAKE_SOURCE_DIR}/")

	if (NOT ${_AIE_LIB_ADF} STREQUAL "")
	   list(TRANSFORM _AIE_LIB_ADF PREPEND "${CMAKE_BINARY_DIR}/")
	endif()

	set(CONFIG_OPTIONS "")
	foreach( cfg ${_PACKAGE_CFG})
	list(APPEND CONFIG_OPTIONS "--config")
	list(APPEND CONFIG_OPTIONS ${cfg})
	endforeach()

	ADD_CUSTOM_COMMAND(OUTPUT ${_XCLBIN}
		BYPRODUCTS ${CMAKE_BINARY_DIR}/${_PACKAGE_PROJ}/${_XCLBIN}.package_summary
			${CMAKE_BINARY_DIR}/${_PACKAGE_PROJ}/v++_${CONTAINER}.log
			${CMAKE_BINARY_DIR}/${_PACKAGE_PROJ}/package.build .Xil xrc.log xcd.log
		COMMAND ${Vitis_COMPILER} --platform ${VITIS_PLATFORM_PATH}
			--target ${VITIS_TARGET} --package ${CONFIG_OPTIONS}
			${USER_PACKAGE_OPTIONS}
			${_PACKAGE_OPTIONS}
			${_PACKAGE_XCLBIN_PATHS} ${_AIE_LIB_ADF}
			-o ${_XCLBIN}
	DEPENDS ${_PACKAGE_CFG}
	)
	ADD_CUSTOM_TARGET(VppPackage_${CONTAINER} ALL
	DEPENDS ${_XCLBIN} ${_LINK_TARGETS})
endforeach()

